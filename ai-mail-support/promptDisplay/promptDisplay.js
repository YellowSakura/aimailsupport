(async()=>{browser.runtime.onMessage.addListener(async e=>{e?.showPromptDisplay===!0&&function(){if(document.querySelector("#amsOuterRequest"))return;let e=document.createElement("div");e.id="amsOuterRequest";let t=e.attachShadow({mode:"open"}),n=document.createElement("div");n.id="amsInnerRequest",t.appendChild(n);let s=document.createElement("link");s.rel="stylesheet",s.href=browser.runtime.getURL("/promptDisplay/promptDisplay.css"),n.appendChild(s);let a=document.createElement("textarea");a.className="auto-resizing-textarea",a.placeholder=messenger.i18n.getMessage("promptDisplay.placeholder"),a.rows=1,n.appendChild(a);let r=document.createElement("button");r.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
        `,r.addEventListener("click",()=>{browser.runtime.sendMessage({action:"sendUserPromptToBackground",data:{userPrompt:a.value}})}),n.appendChild(r);let d=document.createElement("span");d.className="close-icon",d.innerHTML="&times;",d.addEventListener("click",()=>{document.querySelector("#amsOuterRequest").remove()}),n.appendChild(d),a.addEventListener("input",()=>{r.classList.toggle("show",""!==a.value.trim())}),document.body.appendChild(e)}()})})();