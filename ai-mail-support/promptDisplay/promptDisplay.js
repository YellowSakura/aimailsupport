browser.runtime.onMessage.addListener(async e=>{e?.showPromptDisplay===!0&&function(){if(document.querySelector("#amsOuterRequest"))return;let e=document.createElement("div");e.id="amsOuterRequest";let t=e.attachShadow({mode:"open"}),s=document.createElement("div");s.id="amsInnerRequest",t.appendChild(s);let a=document.createElement("link");a.rel="stylesheet",a.href=browser.runtime.getURL("/promptDisplay/promptDisplay.css"),s.appendChild(a);let n=document.createElement("textarea");n.className="auto-resizing-textarea",n.placeholder=messenger.i18n.getMessage("promptDisplay.placeholder"),n.rows=1,s.appendChild(n);let r=document.createElement("button");r.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
        </svg>`,r.addEventListener("click",()=>{""!==n.value.trim()&&browser.runtime.sendMessage({action:"sendUserPromptToBackground",data:{userPrompt:n.value}})}),s.appendChild(r);let l=document.createElement("span");l.className="close-icon",l.innerHTML="&times;",l.addEventListener("click",()=>{document.querySelector("#amsOuterRequest").remove()}),s.appendChild(l),n.addEventListener("input",()=>{n.style.height="auto",""===n.value.trim()?r.classList.remove("active"):(r.classList.add("active"),n.style.height=`${n.scrollHeight}px`)}),document.body.appendChild(e)}()});